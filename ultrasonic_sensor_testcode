#define trigPin 4
#define echoPin 2
#define ledPin 13

// creating a global array and current index
int dataArray[10];
int i = 0;


// the setup function runs once when you press reset or power the board
void setup() {
  Serial.begin(9600);               // initialize serial-lib
  pinMode(trigPin, OUTPUT);         // set trigPin as output pin
  pinMode(echoPin, INPUT);          // set echoPin as input pin
  pinMode(ledPin, OUTPUT);          // set ledPin as output pin
}

// the loop function runs over and over again forever
void loop() {
  int duration, distance;
  digitalWrite(trigPin, HIGH);
  delay(1000);
  delayMicroseconds(1000);
  digitalWrite(trigPin, LOW);
  duration  = pulseIn(echoPin, HIGH);
  distance = (duration / 2) / 29.1;
  Serial.println(distance);

  if (distance >= 0){
    digitalWrite(ledPin, HIGH);
  }
  else if (distance < 0){
    digitalWrite(ledPin, LOW);
  }
  
  // write the data to the array
  dataArray[i] = distance;
  if (i < 9)
    ++i;
  else if (i == 9){
    Serial.println("array on initial scan:");
    Serial.flush();
    int x;
    for (x = 0; x < 10; x = x + 1) {
      Serial.println(dataArray[x]);
      Serial.flush();
    }
    //exit(0);
    i = 0;
    Serial.println("\nrepeating the initial scan");
    Serial.flush();
  }
  delay(1000);
}
